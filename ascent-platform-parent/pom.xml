<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  
  <parent>
    <groupId>gov.va.ascent</groupId>
    <artifactId>ascent-libraries-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath/>  <!-- lookup parent from repository -->
  </parent>
  
  <artifactId>ascent-platform-parent</artifactId>
  <packaging>pom</packaging>
  <name>${project.artifactId}</name>
  <description>Ascent Platform Parent</description>
  
  <properties>
	<!-- ascent library versions -->
	<ascent.starter.version>0.0.1-SNAPSHOT</ascent.starter.version>
	<ascent.test.framework.version>0.0.1-SNAPSHOT</ascent.test.framework.version>
  </properties>
    
  <dependencyManagement>
	<dependencies>
		<dependency>
			<groupId>org.springframework.cloud</groupId>
			<artifactId>spring-cloud-dependencies</artifactId>
			<version>Dalston.SR3</version>
			<type>pom</type>
			<scope>import</scope>
		</dependency>
		<dependency>
            <groupId>org.springframework.retry</groupId>
            <artifactId>spring-retry</artifactId>
            <version>1.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-aop</artifactId>
            <version>1.5.4.RELEASE</version>
        </dependency>
		<!-- Ascent starters-->
		<dependency>
			<groupId>gov.va.ascent</groupId>
			<artifactId>ascent-platform-starter</artifactId>
			<version>${ascent.starter.version}</version>
		</dependency>		
		<dependency>
			<groupId>gov.va.ascent</groupId>
			<artifactId>ascent-platform-starter-security</artifactId>
			<version>${ascent.starter.version}</version>
		</dependency>
		<dependency>
			<groupId>gov.va.ascent</groupId>
			<artifactId>ascent-platform-starter-swagger</artifactId>
			<version>${ascent.starter.version}</version>
		</dependency>
		<dependency>
			<groupId>gov.va.ascent</groupId>
			<artifactId>ascent-platform-starter-logger</artifactId>
			<version>${ascent.starter.version}</version>
		</dependency>
		<dependency>
			<groupId>gov.va.ascent</groupId>
			<artifactId>ascent-platform-starter-cache</artifactId>
			<version>${ascent.starter.version}</version>
		</dependency>
	</dependencies>
  </dependencyManagement>
  
  <build>
	  <finalName>${project.artifactId}</finalName>
		<resources>
	   		<resource>
		        <directory>src/main/resources</directory>
		        <filtering>true</filtering>
		        <includes>
	                   <include>**/*</include>
	               </includes>
				<excludes>
					<exclude>**/cert/*</exclude>
				</excludes>
		    </resource>
			<resource>
				<directory>src/main/resources/cert</directory>
			</resource>
	   	</resources>
  </build>

	<profiles>
		<profile>
			<id>docker-jar-project</id>
			<activation>
		     	<file><!-- add a file named .docker-jar-project-marker to war projects to activate this profile -->
		       	<exists>${basedir}/.docker-jar-project-marker</exists>
		     	</file>
		    </activation>
			<build>
				<plugins>
					<plugin>
						<groupId>com.spotify</groupId>
						<artifactId>dockerfile-maven-plugin</artifactId>
						<version>1.3.6</version>
						<executions>
							<execution>
								<id>default</id>
								<goals>
									<goal>build</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<repository>ascent/${project.artifactId}</repository>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
		<!-- The Configuration of the development profile -->
		<profile>
			<id>dev</id>
			<activation>
				<activeByDefault>true</activeByDefault>
			</activation>
			<properties>
				<!-- Only unit tests are run when the development profile is active -->
				<skipTests>false</skipTests>
				<skipITs>true</skipITs>
			</properties>
		</profile>
		<!-- The Configuration of the inttest profile -->
		<profile>
			<id>inttest</id>
			<properties>
				<!-- Only int tests are run when this inttest profile is active -->
				<skipTests>true</skipTests>
				<skipITs>false</skipITs>
			</properties>
		</profile>
	</profiles>
  
 
</project>